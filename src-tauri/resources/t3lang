#!/bin/bash

# T3Lang CLI Launcher
# Usage: t3lang [path]
# Opens T3Lang app, optionally with a folder or file

APP_NAME="T3Lang"
APP_PATH="/Applications/${APP_NAME}.app"

# Check if app is installed
if [ ! -d "$APP_PATH" ]; then
    echo "Error: ${APP_NAME} is not installed in /Applications"
    exit 1
fi

if [ $# -eq 0 ]; then
    # No arguments - just open the app
    open -a "$APP_NAME"
else
    # Convert to absolute path if relative
    TARGET="$1"
    if [[ ! "$TARGET" = /* ]]; then
        TARGET="$(cd "$(dirname "$TARGET")" 2>/dev/null && pwd)/$(basename "$TARGET")"
    fi

    if [ ! -e "$TARGET" ]; then
        echo "Error: Path does not exist: $1"
        exit 1
    fi

    # Open the app with the path as argument
    open -a "$APP_NAME" --args "$TARGET"
fi
